<!DOCTYPE html><html><head>    <meta charset="utf-8">    <meta content="IE=edge" http-equiv="X-UA-Compatible">    <title>课程审核</title>    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">    <link href="../element-ui/lib/theme-chalk/index.css" rel="stylesheet">    <link href="../font-awesome/css/font-awesome.min.css" rel="stylesheet">    <link href="../css/style.css" rel="stylesheet"></head><body class="hold-transition"><div id="app">    <div class="content-header">        <h1>课程审核</h1>    </div>    <div class="app-container">        <div class="box">            <div class="filter-container">                <el-input class="filter-item" auto-complete="off" placeholder="开课学院" style="width: 210px;"                          v-model="pagination.queryString"></el-input>                &nbsp;                <el-button @click="getCourses()" class="butT" type="primary">筛选</el-button>                <el-button class="butT" type="success" @click="getAllCourses()">查询全部课程</el-button>            </div>            <el-table :data="dataList" current-row-key="id" highlight-current-row size="small" stripe>                <el-table-column align="center" label="课程号" prop="courseID"></el-table-column>                <el-table-column align="center" label="课程名" prop="courseName"></el-table-column>                <el-table-column align="center" label="开课老师" prop="teacher"></el-table-column>                <el-table-column align="center" label="开课学院" prop="college"></el-table-column>                <el-table-column align="center" label="学分" prop="courseCredit"></el-table-column>                <el-table-column align="center" label="容量" prop="studentsLimit"></el-table-column>                <el-table-column prop="description" label="描述" align="center" min-width="300%"></el-table-column>                <el-table-column align="center" label="状态" prop="state">                    <template #default="scope">                        {{getChineseState(scope.row.state)}}                    </template>                </el-table-column>                <el-table-column align="center" label="操作" min-width="140%">                    <template slot-scope="scope">                        <el-button @click="handleAccept(scope.row)" size="mini" type="primary">通过</el-button>                        <el-button @click="handleReject(scope.row)" size="mini" type="danger">驳回</el-button>                    </template>                </el-table-column>            </el-table>            <div class="block" align="center">                <el-pagination                        @size-change="handleSizeChange"                        @current-change="handleCurrentChange"                        :current-page="currentPage"                        :page-sizes="[10, 15, 25, 50]"                        :page-size="100"                        layout="total, sizes, prev, pager, next, jumper"                        :total="dataList == null ? 0 : totalItems">                </el-pagination>            </div>            </template>        </div>    </div></div></body><!-- 引入组件库 --><script src="../js/vue.js"></script><script src="../element-ui/lib/index.js"></script><script src="../js/jquery.min.js" type="text/javascript"></script><script src="../js/axios-0.18.0.js"></script><script>    const stateMap = {        0: '未审核',        1: '审核不通过'    };    var vue = new Vue({        el: '#app',        data: {            pagination: {                queryString: ""            },            dataList: [],//当前页要展示的列表数据            formData: {},//表单数据            dialogFormVisible: false,//控制表单是否可见            dialogFormVisible4Edit: false,//编辑表单是否可见            itemsPerPage: 10,            currentPage: 1,            totalItems: 0        },        //钩子函数，VUE对象初始化完成后自动执行        created() {            this.getAllCourses();        },        methods: {            //列表            getCourses() {                if (this.pagination.queryString == null || this.pagination.queryString === "") {                    this.getAllCourses();                    return;                }                //发送ajax请求                axios.get("/admin-service/get-unaudited-courses?collegeName=" + this.pagination.queryString + "&currentPage=" + this.currentPage + "&itemsPerPage=" + this.itemsPerPage).then((res) => {                    console.log(res)                    console.log(res.data.code)                    if (res.data.code === 1) {                        this.$message.error("查询不到该开课学院！");                        this.dataList = [];                        this.totalItems = 0;                    } else {                        this.dataList = res.data.data.data;                        this.totalItems = res.data.data.total;                    }                });            },            getAllCourses() {                this.pagination.queryString = null;                //发送ajax请求                axios.get("/admin-service/get-unaudited-courses?currentPage=" + this.currentPage + "&itemsPerPage=" + this.itemsPerPage).then((res) => {                    this.dataList = res.data.data.data;                    this.totalItems = res.data.data.total;                });            },            getChineseState(state) {                return stateMap[state];            },            handleAccept(row) {                //1.弹出提示框                this.$confirm("此操作将让该课程通过审核，是否继续？", "提示", {                    type: 'info'                }).then(() => {                    //2.做删除业务                    axios.post("/admin-service/accept", row).then((res) => {                        console.log(row);                        if (res.data.code === 0) {                            this.$message.success("通过成功");                        } else {                            this.$message.error("通过失败");                        }                    }).finally(() => {                        this.getCourses();                    });                }).catch(() => {                    this.$message.info("取消通过操作");                });            },            handleReject(row) {                //1.弹出提示框                this.$confirm("此操作将驳回当前课程注册申请，是否继续？", "提示", {                    type: 'info'                }).then(() => {                    //2.做删除业务                    axios.post("/admin-service/reject", row).then((res) => {                        console.log(row);                        if (res.data.code === 0) {                            this.$message.success("驳回成功");                        } else {                            this.$message.error("驳回失败");                        }                    }).finally(() => {                        this.getCourses();                    });                }).catch(() => {                    //3.取消删除                    this.$message.info("取消驳回操作");                });            },            handleSizeChange(val) {                this.itemsPerPage = val;                this.getCourses();            },            handleCurrentChange(val) {                this.currentPage = val;                this.getCourses();            }        }    })</script></html>